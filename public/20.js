(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{97:function(t,o,e){"use strict";e.r(o);var a={components:{},data:function(){return{headers:[{text:"Code",align:"start",value:"id"},{text:"Category Name",align:"start",value:"name"},{text:"Actions",value:"actions",sortable:!1}],items:[],loading:!1,showForm:!1,deleteForm:!1,formData:{action:null,id:0,category_name:null},itemIndex:-1}},mounted:function(){this.getCategories()},methods:{getCategories:function(){var t=this;this.loading=!0,axios.post("/products/category/view").then((function(o){t.items=o.data.category,t.loading=!1})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar")),t.loading=!1}))},showAddForm:function(){this.formData.action="add",this.formData.id=0,this.formData.category_name=null,this.itemIndex=-1,this.showForm=!0},showUpdateForm:function(t){this.formData.action="update",this.formData.id=t.id,this.formData.category_name=t.name,this.itemIndex=this.items.indexOf(t),this.showForm=!0},deleteProcess:function(t){var o=this;t.id?confirm("Are you sure you want to delete ".concat(t.name))&&(this.loading=!0,axios.post("/products/category/delete",{id:t.id}).then((function(e){o.$store.commit("showSnackbar",{color:!0,text:"".concat(e.data.category.name," deleted.")}),o.itemIndex=o.items.indexOf(t),o.items.splice(o.itemIndex,1),o.loading=!1,o.showForm=!1})).catch((function(t){t.response&&(console.log(t.response),o.$store.commit("errorSnackbar")),o.loading=!1}))):this.$store.commit("errorSnackbar")},submitForm:function(){this.formData.category_name?(this.loading=!0,"add"==this.formData.action?this.processAdd():this.processUpdate(),this.showForm=!1):this.$store.commit("showSnackbar",{color:!1,text:"Category name is required."})},processAdd:function(){var t=this;axios.post("/products/category/add",{name:this.formData.category_name}).then((function(o){t.$store.commit("showSnackbar",{color:!0,text:"".concat(o.data.category.name," added.")}),console.log(o.data.category),t.items.push(o.data.category),t.loading=!1})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar")),t.loading=!1}))},processUpdate:function(){var t=this;axios.post("/products/category/update",{id:this.formData.id,name:this.formData.category_name}).then((function(o){t.$store.commit("showSnackbar",{color:!0,text:"".concat(o.data.category.name," updated.")}),Object.assign(t.items[t.itemIndex],o.data.category),t.loading=!1})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar")),t.loading=!1}))},showRawItems:function(t){this.$emit("showrawitems",t)}},computed:{customID:function(){return this.formData.id>0?"CI - ".concat(this.formData.id.toString().padStart(4,"0")):"N/A"}}},n=e(0),r=Object(n.a)(a,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-row",[e("v-col",{attrs:{sm:"10","offset-sm":"1"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("\n                Category\n                "),e("v-btn",{staticClass:"ml-3",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:t.showAddForm}},[t._v("\n                    Add\n                ")])],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.items,loading:t.loading},on:{"click:row":t.showRawItems},scopedSlots:t._u([{key:"item.id",fn:function(o){var e=o.item;return[t._v("\n                    CI - "+t._s(e.id.toString().padStart(4,"0"))+"\n                ")]}},{key:"item.actions",fn:function(o){var a=o.item;return[e("v-btn",{attrs:{text:"",color:"blue darken-4"},on:{click:function(o){return o.stopPropagation(),t.showUpdateForm(a)}}},[t._v("Update")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"red darken-4"},on:{click:function(o){return o.stopPropagation(),t.deleteProcess(a)}}},[t._v("Delete")])]}},t.showForm?{key:"body.prepend",fn:function(){return[e("tr",[e("td",[t._v("\n                            "+t._s(t.customID)+"\n                        ")]),t._v(" "),e("td",[e("v-text-field",{attrs:{autofocus:"",label:"Category Name"},model:{value:t.formData.category_name,callback:function(o){t.$set(t.formData,"category_name",o)},expression:"formData.category_name"}})],1),t._v(" "),e("td",[e("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:function(o){return o.stopPropagation(),t.submitForm(o)}}},[t._v("\n                                Save\n                            ")]),t._v(" "),e("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:""},on:{click:function(o){o.stopPropagation(),t.showForm=!t.showForm}}},[t._v("\n                                Cancel\n                            ")])],1)])]},proxy:!0}:null],null,!0)})],1)],1)],1)}),[],!1,null,null,null);o.default=r.exports}}]);