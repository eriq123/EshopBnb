(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{MPol:function(e,t,a){"use strict";a.r(t);var n={components:{"datatable-search":function(){return a.e(0).then(a.bind(null,"GPzU"))}},props:{toggleState:{required:!0,type:Boolean}},data:function(){return{search:null,expanded:[],headers:[],items:[],loading:!1,productHeader:[{text:"Code",align:"start",value:"id"},{text:"Product",align:"start",value:"name"},{text:"Assembled",value:"purchase"}],rawHeader:[{text:"Code",align:"start",value:"id"},{text:"Category",align:"start",value:"category_name"},{text:"Raw Item",align:"start",value:"name"},{text:"Purchase",value:"purchase"},{text:"RTS",value:"rts"},{text:"Sold",value:"sold"},{text:"Loss",value:"loss"},{text:"Available Units",value:"quantity"},{text:"Remark",value:"remark"}],itemIndex:-1}},created:function(){this.getProductRaw()},methods:{openExpanded:function(e){if(this.toggleState){var t=this.expanded.indexOf(e);-1===t?this.expanded.push(e):this.expanded.splice(t,1)}},getProductRaw:function(){var e=this;this.items=[],this.loading=!0,this.$emit("toggleChange",!0),axios.post("/inventory/toggle",{toggle:this.toggleState}).then((function(t){console.log(t.data),e.toggleState?e.headers=e.productHeader:e.headers=e.rawHeader,t.data.items.length>0?t.data.toggle?e.items=t.data.items:e.items=t.data.items.map((function(e){return e.category_name=e.category.name,e})):e.items=[],e.loading=!1,e.$emit("toggleChange",!1)})).catch((function(t){console.log(t),e.$store.commit("errorSnackbar"),e.loading=!1,e.$emit("toggleChange",!1)}))}},watch:{toggleState:function(e){this.getProductRaw(),this.expanded=[]}}},r=a("KHd+"),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{attrs:{headers:e.headers,items:e.items,loading:e.loading,search:e.search,"show-expand":e.toggleState,expanded:e.expanded},on:{"update:expanded":function(t){e.expanded=t},"click:row":e.openExpanded},scopedSlots:e._u([{key:"top",fn:function(){return[a("datatable-search",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{attrs:{colspan:n.length}},[a("v-chip-group",{attrs:{column:""}},e._l(r.raws,(function(t,n){return a("v-chip",{key:n},[e._v("\n                    "+e._s(t.pivot.quantity)+" x "+e._s(t.name)+"\n                ")])})),1)],1)]}},{key:"item.remark",fn:function(t){var n=t.item;return[n.quantity<=n.reorder_point?a("v-btn",{attrs:{icon:"",color:"red darken-4",dark:""}},[a("v-icon",[e._v("mdi-exclamation-thick")])],1):a("v-btn",{attrs:{icon:"",color:"green darken-4",dark:""}},[a("v-icon",[e._v("mdi-check-bold")])],1)]}},e.toggleState?{key:"item.id",fn:function(t){var a=t.item;return[e._v("\n        AP - "+e._s(a.id.toString().padStart(4,"0"))+"\n    ")]}}:{key:"item.id",fn:function(t){var a=t.item;return[e._v("\n        RI - "+e._s(a.id.toString().padStart(4,"0"))+"\n    ")]}},{key:"item.sold",fn:function(t){var a=t.item;return[e._v(" ("+e._s(a.sold)+") ")]}},{key:"item.loss",fn:function(t){var a=t.item;return[e._v(" ("+e._s(a.loss)+") ")]}},{key:"item.quantity",fn:function(t){var a=t.item;return[e._v("\n        "+e._s(a.quantity)+" "+e._s(a.base.name)+"\n    ")]}}],null,!0)})}),[],!1,null,null,null);t.default=i.exports}}]);