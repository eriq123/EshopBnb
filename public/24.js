(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{yiMN:function(t,e,n){"use strict";n.r(e);var o={components:{"app-base-unit":function(){return n.e(23).then(n.bind(null,"b6xi"))}},data:function(){return{selected:!1,headers:[{text:"Code",align:"start",value:"id"},{text:"Unit Name",value:"name"},{text:"Quantity",value:"value",align:"end"},{text:"Actions",value:"actions"}],items:[],loading:!1,formData:{id:0,base_id:0,name:null,value:null,action:"add"},itemIndex:-1,showForm:!1,base_name:null}},methods:{showAddForm:function(){this.formData.action="add",this.formData.id=0,this.formData.name=null,this.formData.value=null,this.itemIndex=-1,this.showForm=!0},showUpdateForm:function(t){this.formData.action="update",this.formData.id=t.id,this.formData.name=t.name,this.formData.value=t.value,this.itemIndex=this.items.indexOf(t),this.showForm=!0},deleteProcess:function(t){var e=this;t.id?confirm("Are you sure you want to delete ".concat(t.name))&&(this.loading=!0,axios.post("/units/convert/delete",{id:t.id}).then((function(n){e.$store.commit("showSnackbar",{color:!0,text:"".concat(n.data.convert.name," deleted.")}),e.itemIndex=e.items.indexOf(t),e.items.splice(e.itemIndex,1),e.loading=!1,e.showForm=!1})).catch((function(t){t.response&&(console.log(t.response),e.$store.commit("errorSnackbar")),e.loading=!1}))):this.$store.commit("errorSnackbar")},submitForm:function(){this.formData.name&&this.formData.value>=0?(this.loading=!0,"add"==this.formData.action?this.processAdd():this.processUpdate(),this.showForm=!1):this.$store.commit("showSnackbar",{color:!1,text:"Unit name is required."})},processAdd:function(){var t=this;axios.post("/units/convert/add",this.formData).then((function(e){t.$store.commit("showSnackbar",{color:!0,text:"".concat(e.data.convert.name," added.")}),t.items.push(e.data.convert),t.loading=!1})).catch((function(e){e.response&&(console.log(e.response),t.$store.commit("errorSnackbar")),t.loading=!1}))},processUpdate:function(){var t=this;axios.post("/units/convert/update",this.formData).then((function(e){t.$store.commit("showSnackbar",{color:!0,text:"".concat(e.data.convert.name," updated.")}),Object.assign(t.items[t.itemIndex],e.data.convert),t.loading=!1})).catch((function(e){e.response&&(console.log(e.response),t.$store.commit("errorSnackbar")),t.loading=!1}))},showconverts:function(t){var e=this;this.selected=!0,this.formData.base_id=t.id,this.base_name=t.name,this.loading=!0,axios.post("/units/convert/view",{id:this.formData.base_id}).then((function(t){e.items=t.data.convert,e.loading=!1})).catch((function(t){t.response&&(console.log(t.response),e.$store.commit("errorSnackbar")),e.loading=!1}))}},computed:{customID:function(){return this.formData.id>0?"SUB-UNIT - ".concat(this.formData.id.toString().padStart(4,"0")):"N/A"}}},a=n("KHd+"),s=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t.selected?t._e():n("app-base-unit",{on:{showconverts:t.showconverts}}),t._v(" "),t.selected?n("v-row",[n("v-col",{attrs:{sm:"10","offset-sm":"1"}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",[t._v("\n                    "+t._s(this.base_name)+"\n\n                    "),n("v-btn",{staticClass:"ml-3",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:t.showAddForm}},[t._v("\n                        Add\n                    ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.selected=!1}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v("\n                        Back to units of measurement\n                    ")],1)],1),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{sm:"12"}},[n("v-data-table",{attrs:{headers:t.headers,items:t.items,loading:t.loading},scopedSlots:t._u([{key:"item.id",fn:function(e){var n=e.item;return[t._v("\n                                    SUB-UNIT -\n                                    "+t._s(n.id.toString().padStart(4,"0"))+"\n                                ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[n("v-btn",{attrs:{text:"",color:"blue darken-4"},on:{click:function(e){return e.stopPropagation(),t.showUpdateForm(o)}}},[t._v("Update")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"red darken-4"},on:{click:function(e){return e.stopPropagation(),t.deleteProcess(o)}}},[t._v("Delete")])]}},t.showForm?{key:"body.prepend",fn:function(){return[n("tr",[n("td",[t._v("\n                                            "+t._s(t.customID)+"\n                                        ")]),t._v(" "),n("td",[n("v-text-field",{attrs:{autofocus:"",label:"Unit Name"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),n("td",[n("v-text-field",{attrs:{type:"number",label:"Quantity"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.formData.value,callback:function(e){t.$set(t.formData,"value",e)},expression:"formData.value"}})],1),t._v(" "),n("td",[n("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:function(e){return e.stopPropagation(),t.submitForm(e)}}},[t._v("\n                                                Save\n                                            ")]),t._v(" "),n("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:""},on:{click:function(e){e.stopPropagation(),t.showForm=!t.showForm}}},[t._v("\n                                                Cancel\n                                            ")])],1)])]},proxy:!0}:null],null,!0)})],1)],1)],1)],1)],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=s.exports}}]);