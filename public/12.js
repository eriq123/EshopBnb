(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{j6NC:function(e,t,o){"use strict";o.r(t);var a=o("o0o1"),n=o.n(a);o("cIk9");function r(e,t,o,a,n,r,s){try{var i=e[r](s),c=i.value}catch(e){return void o(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function s(e){return function(){var t=this,o=arguments;return new Promise((function(a,n){var s=e.apply(t,o);function i(e){r(s,a,n,i,c,"next",e)}function c(e){r(s,a,n,i,c,"throw",e)}i(void 0)}))}}var i={props:{user:{required:!0}},components:{"app-qr-menu":function(){return o.e(1).then(o.bind(null,"AWs8"))},"app-qr-converted-units":function(){return o.e(2).then(o.bind(null,"9hRD"))}},data:function(){return{backCamera:!0,drawOnFound:!0,stopOnScan:!0,eventDetail:null,dialog:{show:!1,title:null,disabled:!0,loading:!0,base_name:null,quantity:null},form:{id:0,type:null,quantity:null,action:null,status:null},convert:{collection:[],name:null,value:null},base:{collection:[]},faqs:[{question:"How am i supposed to use the qr scanner?",answer:"Make sure the qr code is seen clearly, once identified it will show you a border around the qr and a dialog will pop up."},{question:"Camera permission denied?",answer:"Please make sure to allow the usage of your back camera, then try again."},{question:"Unknown qr code. Please try again error?",answer:"Only qr codes that are generated in this website can be scanned, if that is the case, please check the updated qr code list as the code may have been updated or deleted."}]}},methods:{processQRCode:function(){var e=this;"Products"==this.form.type?this.form.quantity=this.dialog.quantity:this.form.quantity=this.dialog.quantity*this.convert.value,this.dialog.show=!1,axios.post("/inventory/flow/store",this.form).then((function(t){console.log(t.data),e.$store.commit("showSnackbar",{color:!0,text:"Record has been updated!"})})).catch((function(t){t.response&&(console.log(t.response),t.response.data.error_message?e.$store.commit("showSnackbar",{color:!1,text:t.response.data.error_message}):e.$store.commit("errorSnackbar"))}))},qrScanned:function(e){this.eventDetail=e.detail[0];var t=this.eventDetail.split("-");"eshopbnb"==t[0]?(this.dialog.title="N/A","RI"==t[1]?(this.form.id=t[2],this.form.type="Raw item",this.user.is_admin?(this.form.action="minus",this.form.status="Purchase"):(this.form.action="add",this.form.status="Sold"),this.prepareRawDialog(t[2])):"AP"==t[1]?(this.form.id=t[2],this.form.type="Products",this.user.is_admin,this.form.action="minus",this.form.status="Sold",this.prepareProductDialog(t[2])):this.unknownQRCodeAlert()):this.unknownQRCodeAlert()},prepareRawDialog:function(e){var t=this;return s(n.a.mark((function o(){return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.dialog.show=t.dialog.loading=!0,o.next=3,axios.post("/home/raw",{id:e}).then((function(e){var o=e.data.raw;t.dialog.title="".concat(o.category.name," - ").concat(o.name),t.dialog.base_name=o.base.name,t.convert.collection=e.data.convert,t.convertNameAndValue()})).catch((function(e){e.response?(console.log(e.response),e.response.data.error?t.$store.commit("showSnackbar",{color:!1,text:e.response.data.error}):t.$store.commit("errorSnackbar")):console.log(e)}));case 3:t.dialog.loading=!1;case 4:case"end":return o.stop()}}),o)})))()},prepareProductDialog:function(e){var t=this;return s(n.a.mark((function o(){return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.dialog.show=t.dialog.loading=!0,o.next=3,axios.post("/home/product",{id:e}).then((function(e){console.log(e.data),t.dialog.title=e.data.product.name})).catch((function(e){e.response?(console.log(e.response),e.response.data.error?t.$store.commit("showSnackbar",{color:!1,text:e.response.data.error}):t.$store.commit("errorSnackbar")):console.log(e)}));case 3:t.dialog.loading=!1;case 4:case"end":return o.stop()}}),o)})))()},convertNameAndValue:function(){this.convert.collection.length>0?(this.convert.name=this.convert.collection[0].name,this.convert.value=this.convert.collection[0].value):(this.$store.commit("showSnackbar",{color:!1,text:"Sub-unit is required. Please add one then try again."}),this.dialog.show=!1)},unknownQRCodeAlert:function(){this.$store.commit("showSnackbar",{color:!1,text:"Unknown QR code. Please try again."})},selectedmenu:function(e){this.convert.name=e.name,this.convert.value=e.value},errorCaptured:function(e){switch(e.name){case"NotAllowedError":this.$store.commit("showSnackbar",{color:!1,text:"Camera permission denied."});break;case"NotFoundError":this.$store.commit("showSnackbar",{color:!1,text:"There is no connected camera."});break;case"NotSupportedError":this.$store.commit("showSnackbar",{color:!1,text:"Seems like this page is served in non-secure context."});break;case"NotReadableError":this.$store.commit("showSnackbar",{color:!1,text:"Couldn't access your camera. Is it already in use?"});break;case"OverconstrainedError":this.$store.commit("showSnackbar",{color:!1,text:"Constraints don't match any installed camera."});break;default:console.log(e),this.$store.commit("errorSnackbar")}console.log(e)}}},c=o("KHd+"),l=Object(c.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",[o("v-row",[o("v-col",{staticClass:"pink--text text--accent-2 text-center",attrs:{sm:"12",md:"8","offset-md":"2",lg:"4","offset-lg":"4"}},[o("h1",[e._v("\n                Qr Code Scanner\n            ")]),e._v(" "),o("p",[e._v("Place your eshop qr code here.")]),e._v(" "),o("vue-qr-reader",{attrs:{responsive:"true","use-back-camera":e.backCamera,"draw-on-found":e.drawOnFound,"stop-on-scan":e.stopOnScan},on:{"code-scanned":e.qrScanned,"error-captured":e.errorCaptured}})],1)],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"450px"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[o("v-card",[o("v-progress-linear",{attrs:{indeterminate:e.dialog.loading}}),e._v(" "),o("v-card-title",[o("span",{staticClass:"headline"},[e._v(e._s(this.dialog.title))])]),e._v(" "),o("v-card-text",["Products"==e.form.type?o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{type:"number",label:"Quantity"},model:{value:e.dialog.quantity,callback:function(t){e.$set(e.dialog,"quantity",t)},expression:"dialog.quantity"}})],1):e._e(),e._v(" "),"Raw item"==e.form.type?o("v-row",[o("v-col",{attrs:{cols:"10",offset:"1"}},[o("v-text-field",{attrs:{type:"number",label:"Quantity",loading:e.dialog.loading},scopedSlots:e._u([{key:"append-outer",fn:function(){return[o("app-qr-menu",{attrs:{menu:e.convert.collection,selected:e.convert.name},on:{selectedmenu:e.selectedmenu}})]},proxy:!0}],null,!1,4243591161),model:{value:e.dialog.quantity,callback:function(t){e.$set(e.dialog,"quantity",t)},expression:"dialog.quantity"}})],1),e._v(" "),o("v-col",{attrs:{cols:"10",offset:"1"}},[o("app-qr-converted-units",{attrs:{value:e.dialog.quantity,convertValue:e.convert.value,formDataBaseName:e.dialog.base_name}})],1)],1):e._e()],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog.show=!e.dialog.show}}},[e._v("Cancel")]),e._v(" "),o("v-btn",{attrs:{text:"",color:"green darken-3"},on:{click:e.processQRCode}},[e._v("Save")])],1)],1)],1),e._v(" "),o("v-row",{staticClass:"my-5"},[o("v-col",{staticClass:"pink--text text--accent-2",attrs:{sm:"12",md:"8","offset-md":"2",lg:"4","offset-lg":"4"}},[o("p",{staticClass:" text-center"},[e._v("FAQs")]),e._v(" "),o("v-expansion-panels",{attrs:{accordion:""}},e._l(e.faqs,(function(t,a){return o("v-expansion-panel",{key:a},[o("v-expansion-panel-header",[e._v("\n                        "+e._s(t.question)+"\n                    ")]),e._v(" "),o("v-expansion-panel-content",{staticClass:"text-justify"},[o("span",{staticClass:"font-weight-light"},[e._v(e._s(t.answer))])])],1)})),1)],1)],1)],1)}),[],!1,null,null,null);t.default=l.exports}}]);