(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{aL7E:function(t,e,a){"use strict";a.r(e);var n={components:{"datatable-search":function(){return a.e(0).then(a.bind(null,"GPzU"))}},props:{toggleState:{required:!0,type:Boolean},updatedItem:{type:Object}},data:function(){return{search:null,expanded:[],headers:[],items:[],loading:!1,productHeader:[{text:"Code",align:"start",value:"id"},{text:"Product",align:"start",value:"name"},{text:"Actions",value:"actions"}],rawHeader:[{text:"Code",align:"start",value:"id"},{text:"Category",align:"start",value:"category_name"},{text:"Raw Item",align:"start",value:"name"},{text:"Quantity",value:"quantity"},{text:"Actions",value:"actions"}],itemIndex:-1}},created:function(){this.getProductRaw()},methods:{openExpanded:function(t){if(this.toggleState){var e=this.expanded.indexOf(t);-1===e?this.expanded.push(t):this.expanded.splice(e,1)}},getProductRaw:function(){var t=this;this.items=[],this.loading=!0,this.$emit("toggleChange",!0),axios.post("/inventory/toggle",{toggle:this.toggleState}).then((function(e){t.toggleState?t.headers=t.productHeader:t.headers=t.rawHeader,e.data.items.length>0?e.data.toggle?t.items=e.data.items:t.items=e.data.items.map((function(t){return t.category_name=t.category.name,t})):t.items=[],t.loading=!1,t.$emit("toggleChange",!1)})).catch((function(e){console.log(e.response),t.loading=!1,t.$emit("toggleChange",!1)}))},datatableclick:function(t,e){this.itemIndex=this.items.indexOf(e),this.$emit("datatableclick",{item:e,action:t})}},watch:{toggleState:function(t){this.getProductRaw(),this.expanded=[]},updatedItem:function(t){this.toggleState||Object.assign(this.items[this.itemIndex],t)}}},i=a("KHd+"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{headers:t.headers,items:t.items,loading:t.loading,search:t.search,"show-expand":t.toggleState,expanded:t.expanded},on:{"update:expanded":function(e){t.expanded=e},"click:row":t.openExpanded},scopedSlots:t._u([{key:"top",fn:function(){return[a("datatable-search",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"expanded-item",fn:function(e){var n=e.headers,i=e.item;return[a("td",{attrs:{colspan:n.length}},[a("v-chip-group",{attrs:{column:""}},t._l(i.raws,(function(e,n){return a("v-chip",{key:n},[t._v("\n                    "+t._s(e.pivot.quantity)+" x "+t._s(e.name)+"\n                ")])})),1)],1)]}},{key:"item.actions",fn:function(e){var n=e.item;return[t.toggleState?t._e():a("v-btn",{attrs:{fab:"","x-small":"",outlined:"",color:"green darken-4"},on:{click:function(e){return e.stopPropagation(),t.datatableclick("add",n)}}},[a("v-icon",[t._v("\n                mdi-plus\n            ")])],1),t._v(" "),a("v-btn",{attrs:{fab:"","x-small":"",outlined:"",color:"red darken-4"},on:{click:function(e){return e.stopPropagation(),t.datatableclick("minus",n)}}},[a("v-icon",[t._v("\n                mdi-minus\n            ")])],1)]}}])})}),[],!1,null,null,null);e.default=o.exports}}]);