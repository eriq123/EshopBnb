(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{100:function(t,o,e){"use strict";e.r(o);var n=e(1),r=e.n(n);function a(t,o,e,n,r,a,s){try{var c=t[a](s),i=c.value}catch(t){return void e(t)}c.done?o(i):Promise.resolve(i).then(n,r)}function s(t){return function(){var o=this,e=arguments;return new Promise((function(n,r){var s=t.apply(o,e);function c(t){a(s,n,r,c,i,"next",t)}function i(t){a(s,n,r,c,i,"throw",t)}c(void 0)}))}}var c={props:{rawItemsReady:{type:Boolean}},components:{},data:function(){return{headers:[{text:"Code",align:"start",value:"id"},{text:"Product Name",align:"start",value:"name"},{text:"Actions",value:"actions",sortable:!1}],items:[],loading:!1,showForm:!1,deleteForm:!1,formData:{action:null,id:0,product_name:null},itemIndex:-1}},mounted:function(){this.getProducts()},methods:{productQR:function(){window.location.href="/qr/products"},showAddForm:function(){this.formData.action="add",this.formData.id=0,this.formData.product_name=null,this.itemIndex=-1,this.showForm=!0},showUpdateForm:function(t){this.formData.action="update",this.formData.id=t.id,this.formData.product_name=t.name,this.itemIndex=this.items.indexOf(t),this.showForm=!0},submitForm:function(){this.formData.product_name?(this.loading=!0,"add"==this.formData.action?this.processAdd():this.processUpdate(),this.showForm=!1):this.$store.commit("showSnackbar",{color:!1,text:"Product name is required."})},getProducts:function(){var t=this;return s(r.a.mark((function o(){return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,o.next=3,axios.post("/products/view").then((function(o){t.items=o.data.product})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar"))}));case 3:t.loading=!1;case 4:case"end":return o.stop()}}),o)})))()},processAdd:function(){var t=this;return s(r.a.mark((function o(){return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,axios.post("/products/add",{name:t.formData.product_name}).then((function(o){t.$store.commit("showSnackbar",{color:!0,text:"".concat(o.data.product.name," added.")}),console.log(o.data.product),t.items.push(o.data.product)})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar"))}));case 2:t.loading=!1;case 3:case"end":return o.stop()}}),o)})))()},processUpdate:function(){var t=this;return s(r.a.mark((function o(){return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,axios.post("/products/update",{id:t.formData.id,name:t.formData.product_name}).then((function(o){t.$store.commit("showSnackbar",{color:!0,text:"".concat(o.data.product.name," updated.")}),Object.assign(t.items[t.itemIndex],o.data.product)})).catch((function(o){o.response&&(console.log(o.response),t.$store.commit("errorSnackbar"))}));case 2:t.loading=!1;case 3:case"end":return o.stop()}}),o)})))()},processDelete:function(t){var o=this;return s(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=8;break}if(!confirm("Are you sure you want to delete ".concat(t.name))){e.next=6;break}return o.loading=!0,e.next=5,axios.post("/products/delete",{id:t.id}).then((function(e){o.$store.commit("showSnackbar",{color:!0,text:"".concat(e.data.product.name," deleted.")}),o.itemIndex=o.items.indexOf(t),o.items.splice(o.itemIndex,1),o.showForm=!1})).catch((function(t){t.response&&(console.log(t.response),o.$store.commit("errorSnackbar"))}));case 5:o.loading=!1;case 6:e.next=9;break;case 8:o.$store.commit("errorSnackbar");case 9:case"end":return e.stop()}}),e)})))()},productSelected:function(t){this.rawItemsReady?this.$emit("productselected",t):this.$store.commit("showSnackbar",{color:!1,text:"Raw items are still loading..."})}},computed:{customID:function(){return this.formData.id>0?"AP - ".concat(this.formData.id.toString().padStart(4,"0")):"N/A"}}},i=e(0),d=Object(i.a)(c,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-row",[e("v-col",{attrs:{sm:"10","offset-sm":"1"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("\n                Products\n                "),e("v-btn",{staticClass:"ml-3",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:t.showAddForm}},[t._v("\n                    Add\n                ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:"",color:"pink accent-2"},on:{click:t.productQR}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-qrcode-scan")]),t._v("\n                    Assembled Product qr codes\n                ")],1)],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.items,loading:t.loading},on:{"click:row":t.productSelected},scopedSlots:t._u([{key:"item.id",fn:function(o){var e=o.item;return[t._v("\n                    AP - "+t._s(e.id.toString().padStart(4,"0"))+"\n                ")]}},{key:"item.actions",fn:function(o){var n=o.item;return[e("v-btn",{attrs:{text:"",color:"blue darken-4"},on:{click:function(o){return o.stopPropagation(),t.showUpdateForm(n)}}},[t._v("Update")]),t._v(" "),e("v-btn",{attrs:{text:"",color:"red darken-4"},on:{click:function(o){return o.stopPropagation(),t.processDelete(n)}}},[t._v("Delete")])]}},t.showForm?{key:"body.prepend",fn:function(){return[e("tr",[e("td",[t._v("\n                            "+t._s(t.customID)+"\n                        ")]),t._v(" "),e("td",[e("v-text-field",{attrs:{autofocus:"",label:"Product Name"},model:{value:t.formData.product_name,callback:function(o){t.$set(t.formData,"product_name",o)},expression:"formData.product_name"}})],1),t._v(" "),e("td",[e("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:"",color:"green darken-4"},on:{click:function(o){return o.stopPropagation(),t.submitForm(o)}}},[t._v("\n                                Save\n                            ")]),t._v(" "),e("v-btn",{staticClass:"ml-1 my-1",attrs:{text:"",outlined:""},on:{click:function(o){o.stopPropagation(),t.showForm=!t.showForm}}},[t._v("\n                                Cancel\n                            ")])],1)])]},proxy:!0}:null],null,!0)})],1)],1)],1)}),[],!1,null,null,null);o.default=d.exports}}]);