(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{102:function(t,e,a){"use strict";a.r(e);var n={props:{toggleState:{required:!0,type:Boolean}},data:function(){return{expanded:[],headers:[],items:[],loading:!1,productHeader:[{text:"Code",align:"start",value:"id"},{text:"Product",align:"start",value:"name"},{text:"Assembled",value:"purchase"}],rawHeader:[{text:"Code",align:"start",value:"id"},{text:"Category",align:"start",value:"category_name"},{text:"Raw Item",align:"start",value:"name"},{text:"Purchase",value:"purchase"},{text:"RTS",value:"rts"},{text:"Sold",value:"sold"},{text:"Loss",value:"loss"},{text:"Available Units",value:"quantity"},{text:"Remark",value:"remark"}],itemIndex:-1}},created:function(){this.getProductRaw()},methods:{openExpanded:function(t){if(this.toggleState){var e=this.expanded.indexOf(t);-1===e?this.expanded.push(t):this.expanded.splice(e,1)}},getProductRaw:function(){var t=this;this.items=[],this.loading=!0,this.$emit("toggleChange",!0),axios.post("/inventory/toggle",{toggle:this.toggleState}).then((function(e){console.log(e.data),t.toggleState?t.headers=t.productHeader:t.headers=t.rawHeader,e.data.items.length>0?e.data.toggle?t.items=e.data.items:t.items=e.data.items.map((function(t){return t.category_name=t.category.name,t})):t.items=[],t.loading=!1,t.$emit("toggleChange",!1)})).catch((function(e){console.log(e),t.$store.commit("errorSnackbar"),t.loading=!1,t.$emit("toggleChange",!1)}))}},watch:{toggleState:function(t){this.getProductRaw(),this.expanded=[]}}},i=a(0),r=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{headers:t.headers,items:t.items,loading:t.loading,"show-expand":t.toggleState,expanded:t.expanded},on:{"update:expanded":function(e){t.expanded=e},"click:row":t.openExpanded},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var n=e.headers,i=e.item;return[a("td",{attrs:{colspan:n.length}},[a("v-chip-group",{attrs:{column:""}},t._l(i.raws,(function(e,n){return a("v-chip",{key:n},[t._v("\n                    "+t._s(e.pivot.quantity)+" x "+t._s(e.name)+"\n                ")])})),1)],1)]}},{key:"item.remark",fn:function(e){var n=e.item;return[n.quantity<=n.reorder_point?a("v-btn",{attrs:{icon:"",color:"red darken-4",dark:""}},[a("v-icon",[t._v("mdi-exclamation-thick")])],1):a("v-btn",{attrs:{icon:"",color:"green darken-4",dark:""}},[a("v-icon",[t._v("mdi-check-bold")])],1)]}},t.toggleState?{key:"item.id",fn:function(e){var a=e.item;return[t._v("\n        AP - "+t._s(a.id.toString().padStart(4,"0"))+"\n    ")]}}:{key:"item.id",fn:function(e){var a=e.item;return[t._v("\n        RI - "+t._s(a.id.toString().padStart(4,"0"))+"\n    ")]}},{key:"item.sold",fn:function(e){var a=e.item;return[t._v(" ("+t._s(a.sold)+") ")]}},{key:"item.loss",fn:function(e){var a=e.item;return[t._v(" ("+t._s(a.loss)+") ")]}},{key:"item.quantity",fn:function(e){var a=e.item;return[t._v("\n        "+t._s(a.quantity)+" "+t._s(a.base.name)+"\n    ")]}}],null,!0)})}),[],!1,null,null,null);e.default=r.exports}}]);